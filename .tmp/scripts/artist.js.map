{"version":3,"sources":["../../app/scripts/artist.js"],"names":[],"mappings":"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","file":"artist.js","sourcesContent":["/*global createjs*/\n(function(createjs) {\n  'use strict';\n\n  var next, shape, start, stroke;\n\n  var drawMode = false,\n    stage = new createjs.Stage('canvas'),\n    precision = 40,\n    origin = {\n      x: 0,\n      y: 0\n    },\n    last = origin;\n\n  var getAABB = function(stroke) {\n\n    var aabb, highest, lowest, point;\n\n    var i = 0;\n\n    while (i < stroke.length) {\n      point = stroke[i];\n      if (!lowest && !highest) {\n        lowest = JSON.parse(JSON.stringify(point));\n        highest = JSON.parse(JSON.stringify(point));\n        i++;\n        continue;\n      }\n      if (point.x > highest.x) {\n        highest.x = point.x;\n      }\n      if (point.x < lowest.x) {\n        lowest.x = point.x;\n      }\n      if (point.y > highest.y) {\n        highest.y = point.y;\n      }\n      if (point.y < lowest.y) {\n        lowest.y = point.y;\n      }\n      i++;\n    }\n    aabb = {\n      topLeft: {\n        x: lowest.x,\n        y: lowest.y\n      },\n      width: highest.x - lowest.x,\n      height: highest.y - lowest.y\n    };\n    return aabb;\n  };\n\n\n  stage.on('stagemousedown', function() {\n    drawMode = true;\n  });\n\n  stage.on('stagemousemove', function(event) {\n    if (drawMode) {\n      if (!shape) {\n        shape = new createjs.Shape();\n        shape.x = event.stageX;\n        shape.y = event.stageY;\n        stroke = [];\n        start = origin;\n        stroke.push(start);\n        stage.addChild(shape)\n          .graphics.beginStroke('red')\n          .update();\n      }\n      next = {\n        x: event.stageX - shape.x,\n        y: event.stageY - shape.y\n      };\n      shape.graphics.lineTo(next.x, next.y);\n      stage.update();\n      stroke.push(next);\n    }\n  });\n\n  stage.on('stagemouseup', function() {\n\n    drawMode = false;\n    last = stroke[stroke.length - 1];\n\n    var aShape, initialPosition, point, reseted;\n\n    var aabbMeasures = getAABB(stroke),\n      width = aabbMeasures.width,\n      height = aabbMeasures.height,\n      topLeft = {\n        x: aabbMeasures.topLeft.x,\n        y: aabbMeasures.topLeft.y\n      };\n\n\n    var distance = Math.sqrt(Math.pow(last.x - origin.x, 2) +\n      Math.pow(last.y - origin.y, 2));\n\n    if (precision > distance) {\n\n      shape.graphics.lineTo(origin.x, origin.y);\n\n      for (var j = 0, len = stroke.length; j < len; j++) {\n        point = stroke[j];\n\n        if (!reseted) {\n          reseted = true;\n          shape.graphics.clear();\n          shape.graphics.beginStroke('red').beginFill('red').moveTo(origin.x, origin.y);\n        }\n\n        shape.graphics.lineTo(point.x, point.y);\n\n        if (point.x === last.x && point.y === last.y) {\n          shape.graphics.lineTo(origin.x, origin.y).closePath();\n        }\n      }\n\n    }\n\n    stage.update();\n\n    shape.setBounds(topLeft.x, topLeft.y, width, height);\n\n    aShape = shape;\n\n    aShape.on('pressmove', function(event) {\n      drawMode = false;\n\n      var delta, newPosition;\n\n      if (!initialPosition) {\n        initialPosition = {};\n        initialPosition.x = event.stageX;\n        initialPosition.y = event.stageY;\n      } else {\n        newPosition = {};\n        newPosition.x = event.stageX;\n        newPosition.y = event.stageY;\n        delta = {};\n        delta.x = newPosition.x - initialPosition.x;\n        delta.y = newPosition.y - initialPosition.y;\n        event.target.x += delta.x;\n        event.target.y += delta.y;\n        initialPosition = newPosition;\n      }\n\n      return stage.update();\n    });\n    stage.update();\n\n    shape = null;\n  });\n})(createjs);\n"]}